#java内存模型 java内存管理 java堆栈 内存管理

    https://www.jcp.org/en/jsr/detail?id=133
    http://ifeve.com/jmm-faq/
    原文在以上链接

1、什么是内存模型
    
    Java内存模型描述了在多线程代码中哪些行为是合法的，以及线程如何通过内存进行交互。它描述了“程序中的变量“ 和 ”从内存或者寄存器获取或存储它们的底层细节”之间的关系。Java内存模型通过使用各种各样的硬件和编译器的优化来正确实现以上事情。

2、其他语言，像c++，也有内存模型吗？
    
    大部分其他的语言，像C和C++，都没有被设计成直接支持多线程。这些语言对于发生在编译器和处理器平台架构的重排序行为的保护机制会严重的依赖于程序中所使用的线程库（例如pthreads），编译器，以及代码所运行的平台所提供的保障。

3、JSR 133是什么？

    JSR133的目的是创建一组正式语义，这些正式语义提供了volatile、synchronzied和final如何工作的直观框架
    
4、重排序是什么？

    在很多情况下，访问一个程序变量（对象实例字段，类静态字段和数组元素）可能会使用不同的顺序执行，而不是程序语义所指定的顺序执行。编译器能够自由的以优化的名义去改变指令顺序。在特定的环境下，处理器可能会次序颠倒的执行指令。数据可能在寄存器，处理器缓冲区和主内存中以不同的次序移动，而不是按照程序指定的顺序。
    
5、旧的内存模型有什么问题？

    旧的内存模型中有几个严重的问题。这些问题很难理解，因此被广泛的违背。例如，旧的存储模型在许多情况下，不允许JVM发生各种重排序行为。旧的内存模型中让人产生困惑的因素造就了JSR-133规范的诞生。

6、没有正确同步的含义是什么？

    1、一个线程中有一个对变量的写操作，
    2、另外一个线程对同一个变量有读操作，
    3、而且写操作和读操作没有通过同步来保证顺序。
    当这些规则被违反的时候，我们就说在这个变量上有一个“数据竞争”(data race)。一个有数据竞争的程序就是一个没有正确同步的程序。
    
7、同步会干些什么呢?
    
    http://ifeve.com/jmm-faq-synchronization/
    
8、Final字段如何改变它们的值

    http://ifeve.com/jmm-faq-finalwrong/

